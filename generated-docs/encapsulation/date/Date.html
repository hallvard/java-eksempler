<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Date</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_date">Date</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dette eksemplet handler om hensikten med innkapsling og hvilke teknikker som bidrar til det.</p>
</div>
<div class="sect2">
<h3 id="_innkapsling">Innkapsling</h3>
<div class="paragraph">
<p>Innkapsling har to formål:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Først og fremst skal det <em>hindre</em> at et objekt <em>brukes galt</em> og havner i en <em>tilstand som er ugyldig</em> og kan føre til feil (siden).</p>
</li>
<li>
<p>For det andre skal det gjøre det enklere å endre detaljer i (koden for) håndtering av intern tilstand, uten at koden i andre klasser også må endres.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Teknikken er å <em>skjule</em> alle implementasjonsdetaljer for andre klasser og sikre at all tilgang til tilstand og spesielt endring av den, skjer ved å kalle <em>åpne</em> metoder.
Konstruktørene og endringsmetodene får ansvar for å sikre at tilstanden hele tiden er og forblir gyldig.</p>
</div>
<div class="paragraph">
<p>Eksempelobjektet vårt skal holde rede på dato-informasjon, altså et tidspunkt representert ved dag, måned og år.
Hver av disse representeres med et heltall, med begrensninger i verdieområdet iht. vanlig kalenderlogikk.</p>
</div>
</div>
<div class="sect2">
<h3 id="_koden">Koden</h3>
<div class="paragraph">
<p>Vi kaller klassen vår <code>Date</code> og legger den i pakken <code>encapsulation.date</code>.
Merk at det allerede finnes en standard <code>Date</code>-klasse i pakken <code>java.util</code>.</p>
</div>
<div class="sect3">
<h4 id="_variablene">Variablene</h4>
<div class="paragraph">
<p>Vi bestemmer oss først for hvordan tilstanden skal representeres i form av variabler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int year;  // ingen begrensninger
int month; // 1 til (og med) 12
int day    // 1 til (og med) antall dager i måneden</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>month</code>-variablen må altså begrenses til tallene 1-12, og gyldig verdiområde for <code>day</code> er avhengig av både måneden og året (pga. skuddår).
Hvis <code>month</code> f.eks. er 2 (for februar) så må <code>day</code> begrenses til 1-28, med mindre <code>year</code> tilsvarer et skuddår, hvor også 29 tillates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_endringsmetoder">Endringsmetoder</h4>
<div class="paragraph">
<p>Det er koden som <em>endrer</em> tilstanden, som må hindre at tilstanden blir feil, altså sikre at variablene holdes innenfor <em>gyldige</em> verdiområder.
Teknikken er enkel: Før variabler endres, så sjekkes det om de(n) nye verdien(e) vil være gyldig(e).
Om de(n) ikke vil være det, så <em>utløses unntak</em>, som er en måte å "kræsje" et program på som gir informasjon om hva som gikk galt,
med mulighet til å håndtere det (mer om det i andre eksempler).</p>
</div>
<div class="paragraph">
<p>Her er et eksempel på hvordan metoden for å endre måneden kan se ut:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">void setMonth(int month) {
   if (month &lt; 1 || month &gt; 12) { <b class="conum">(1)</b>
      throw new IllegalArgumentException("The month must be in the range [1, 12]"); <b class="conum">(2)</b>
   }
   this.month = month; <b class="conum">(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Sjekker om ny verdi er gyldig, eller mer presist: Om bruk av den nye verdien vil føre til at tilstanden for <em>hele</em> objektet <em>forblir</em> gyldig.</p>
</li>
<li>
<p>Utløser et passende unntak med en deskriptiv tekst. Dette <em>avbryter</em> utførelsen av metoden.</p>
</li>
<li>
<p>Tilstanden endres først når det er sikret at den vil være gyldig. Merk bruken av <code>this</code> for så skille mellom objektvariabel og parameter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Konvensjonen i Java er å navngi slike endringsmetoder med <code>set</code> foran det logiske navnet til verdien som endres, derav navnet <code>setMonth</code>.
Derfor kaller en gjerne slike metoder for "settere".</p>
</div>
<div class="paragraph">
<p>Koden over kan virke helt grei, men det er faktisk ikke så enkelt: Det er ikke nok å sjekke at argumentet er i verdiområdet 1-12,
tilstanden kan fortsatt bli ugyldig fordi flere variabler henger sammen. Anta f.eks. at <code>month</code> og <code>day</code> er henholdsvis <code>1</code> og <code>31</code>, altså verdiene som tilsvarer 31. januar.
Så kalles <code>setMonth(2)</code>, som vil endre datoen til 31. februar! Dette er opplagt galt og må forhindres.</p>
</div>
<div class="paragraph">
<p>Løsningen generelt sett er å både sjekke argumentene isolert sett og sammen med gjeldende verdi for andre variabler, slik at en vurderer dem samlet.
Her må en sjekke <code>month</code>-argumentet sammen med <code>day</code>-variablen (i objektet). Eller vent litt, siden vi også må ta høyde for skuddår,
så må vi også ta hensyn til <code>year</code>-variablen. Hvis gjeldende dato er 29. januar, så kan jo endring av <code>month</code> til 2 faktisk være greit,
om det er skuddår og 29. februar faktisk finnes.</p>
</div>
<div class="paragraph">
<p>Her er et forslag til kode, hvor vi har forutsatt at det finnes en hjelpemetode kalt <code>daysInMonth</code>,
som returnerer antall dager i måneden (og tar høyde for skuddår):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">void setMonth(int month) {
   if (month &lt; 1 || month &gt; 12) { <b class="conum">(1)</b>
      throw new IllegalArgumentException("The month must be in the range [1, 12]");
   }
   int dayLimit = daysInMonth(year, month);
   if (day &lt; 1 || day &gt; dayLimit) { <b class="conum">(2)</b>
      throw new IllegalArgumentException(String.format("The day must be in the range [1, %s], when the month is %s and the year is %s", dayLimit, month, year));
   }
   this.month = month;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Først sjekkes måneden (som over), og hvis den er grei fortsetter koden.</p>
</li>
<li>
<p>Dagen sjekkes, etter å ha beregnet maks-verdien vha. hjelpemetoden <code>daysInMonth</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_valideringsmetoder">Valideringsmetoder</h4>
<div class="paragraph">
<p>Ofte er det lurt å flytte koden med alle verdi-sjekkene over i en eller flere hjelpemetoder,
såkalte <em>valideringsmetoder</em>. Det gjør koden lettere å lese, og siden de samme <code>if</code>-setningene ofte må brukes flere steder, så sparer en kode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">void checkDate(int year, int month, int day) { <b class="conum">(1)</b>
   if (month &lt; 1 || month &gt; 12) {
      throw new IllegalArgumentException("The month must be in the range [1, 12]");
   }
   int dayLimit = daysInMonth(year, month);
   if (day &lt; 1 || day &gt; dayLimit) {
      throw new IllegalArgumentException(String.format("The day must be in the range [1, %s], when the month is %s and the year is %s", dayLimit, month, year));
   }
}

void setYear(int year) {
   checkDate(year, this.month, this.day); <b class="conum">(2)</b>
   this.year = year; <b class="conum">(5)</b>
}

void setMonth(int month) {
   checkDate(this.year, month, this.day); <b class="conum">(3)</b>
   this.month = month; <b class="conum">(5)</b>
}

void setDay(int day) {
   checkDate(this.year, this.month, day); <b class="conum">(4)</b>
   this.day = day; <b class="conum">(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>checkDate</code>-metoden sjekker et sett med år-, måned- og dag-verdier samlet,
og alle endringsmetoder som endrer en av de tre variablene, kaller denne.</p>
</li>
<li>
<p>Sjekker ny <code>year</code>-verdi sammen med eksisterende <code>month</code>- og <code>day</code>-verdier.</p>
</li>
<li>
<p>Sjekker ny <code>month</code>-verdi sammen med eksisterende <code>year</code>- og <code>day</code>-verdier</p>
</li>
<li>
<p>Sjekker ny <code>day</code>-verdi sammen med eksisterende <code>year</code>- og <code>month</code>-verdier</p>
</li>
<li>
<p>Tilordningene utføres bare dersom kallet til <code>checkDate</code> <em>ikke</em> utløser unntak.
Litt forvirrende, kanskje, men det er slik unntak virker. Bare prøv og se!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>checkDate</code>-metoden over validerer og utløser unntak for å si fra om feil.
Det hender man i stedet velger å la valideringsmetoden returnere <code>true</code> om det er greit og <code>false</code> ellers,
og så utløser unntak i endringsmetoden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">boolean isValidDate(int year, int month, int day) {
   if (month &lt; 1 || month &gt; 12) {
      return false;
   }
   int dayLimit = daysInMonth(year, month);
   if (day &lt; 1 || day &gt; dayLimit) {
      return false;
   }
   return true;
}

void setYear(int year) {
   if (! isValidDate(year, this.month, this.day)) {
      throw new IllegalArgumentException("This combination of year (" + year + "), this.month (" + month + ") and day (" + this.day + ") is illegal");
   }
   this.year = year;
}

// tilsvarende for setMonth og setDay</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fordelen er bl.a. at det er litt lettere å se at endringsmetoden faktisk kan utløse unntak, men her ser en også at det er flere ulemper:
Det blir mer duplisering av kode, og unntaksteksten blir mindre spesifikk, siden en ikke vet akkurat hvilken betingelse som ikke ble oppfylt.
Generelt kan en ha én eller flere valideringsmetoder av en eller begge typer, en må vurdere hva som er mest praktisk i hvert tilfelle.</p>
</div>
</div>
<div class="sect3">
<h4 id="_konstruktører">Konstruktører</h4>
<div class="paragraph">
<p>Hittil har vi fokusert vi på <em>endring</em> av tilstand, gitt at tilstanden <em>før</em> endringen var gyldig.
Vi må selvsagt også sjekke at den initielle tilstanden, som settes ved opprettelsen, er gyldig.
I vårt tilfelle kan det gjøres ved å initialisere <code>month</code>- og <code>day</code>-variablene til <code>1</code>, slik at et nyopprettet <code>Date</code>-objekt tilsvarer 1. januar i år 0.
Her er det nok bedre å ha en konstruktør som tar inn alle de tre "tidskoordinatene", slik at de valideres og settes samlet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Date(int year, int month, int day) {
   checkDate(year, month, day); <b class="conum">(1)</b>
   this.year = year;
   this.month = month;
   this.day = day;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Samme sjekk som over, opprettelsen av objektet blir avbrutt hvis <code>checkDate</code> utløser unntak.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En kan forsåvidt også argumentere med at det er greit å ha en tilsvarende <code>set</code>-metode, som setter alle verdiene på én gang.
Da blir koden som følger:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Date(int year, int month, int day) {
   setDate(year, month, day); <b class="conum">(2)</b>
}

void setDate(int year, int month, int day) {
   checkDate(year, month, day); <b class="conum">(1)</b>
   this.year = year;
   this.month = month;
   this.day = day;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Hvis <code>checkDate</code> utløser unntak, så avbrytes <code>setDate</code>-metoden.</p>
</li>
<li>
<p>Hvis <code>setDate</code> avbrytes fordi kallet til <code>checkDate</code> utløser unntak, så avbrytes konstruktøren.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Med en slik endre-alt-på-en-gang-metode kan konstruktøren bare kalle den og få valideringen på kjøpet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_synlighetsmodifikatorene_public_og_private">Synlighetsmodifikatorene <code>public</code> og <code>private</code></h4>
<div class="paragraph">
<p>Hvis en koder endringsmetoder som over, så hindrer en at tilstanden blir ugyldig, men bare dersom metodene må brukes!
Anta f.eks. at vi har en variabel av typen <code>Date</code> i en annen klasse, la oss si den heter <code>birthday</code>, og så skriver <code>birthday.day = 47</code>.
Da blir jo tilstanden gal, på tross av endringsmetodene. Uten en mekanisme for å <em>hindre</em> direkte tilgang til variablene, så er en nesten like langt.</p>
</div>
<div class="paragraph">
<p>Java sin mekanisme er såkalte <em>synlighetsmodifikatorer</em>, som styrer hvilke variabler og metoder i en klasse, som kan <em>refereres</em> direkte til i andre klasser.
Synlighetsmodifikatorer er spesial-ord som settes foran deklarasjonen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>private</code> angir at en variabel, metode eller konstruktør <em>ikke kan referere (direkte) til</em> fra en annen klasse</p>
</li>
<li>
<p><code>public</code> angir at en variabel, metode eller konstruktør kan refereres direkte til fra <code>alle</code> klasser.</p>
</li>
<li>
<p><em>Ingen</em> modifikator angir at bare klasser i <em>samme pakke</em> (som gjerne hører sammen) kan bruke variablen, metoden eller konstruktøren.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Den generelle regelen blir å bruke <code>private</code> foran alle variabeldeklarasjoner og <code>public</code> foran <em>utvalgte</em> konstruktører og metoder.
Hjelpemetoder som <code>daysInMonth</code> får som regel <code>private</code>-synlighet, med mindre de er så nyttige for andre klasser
at en velger å gjøre dem helt (<code>public</code>) eller delvis (ingen modifikator) synlige.</p>
</div>
<div class="paragraph">
<p>Det viktigste er uansett at <code>public</code>-konstruktøren(e) må sikre at tilstanden er gyldig fra starten av,
og <code>public</code>-metodene må sikre at tilstanden <em>forblir</em> gyldig.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lesemetoder">Lesemetoder</h4>
<div class="paragraph">
<p>Med regelen over om at variabler skal være <code>private</code>, så blir de helt usynlige utenifra, og da må en som oftest også ha en del <code>public</code>-metoder for å lese tilstanden.
Slike <em>lesemetoder</em> er metoder som skal gi mulighet til å observere tilstanden til (variablene i) et objekt.
I en klasse som <code>Date</code> er det naturlig å ha én metode tilsvarende hver variabel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public int getYear() {
   return year;
}

public int getMonth() {
   return month;
}

public int getDay() {
   return day;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Konvensjonen i Java er å navngi slike enkle lesemetoder ved å sette <code>get</code> foran det logiske navnet på verdien en leser.
Derfor kaller en gjerne slike metoder for "gettere". I tilfeller hvor verdien er av type <code>boolean</code> så kan <code>is</code> brukes som prefiks i stedet, når det gjør koden mer naturlig å lese.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_er_og_intern_tilstand">API-er og intern tilstand</h3>
<div class="paragraph">
<p><code>public</code>-konstruktørene og -metodene til en klasse utgjør klassens <em>grensesnitt</em> mot andre klasser, det som også kalles klassens API, for Application Programming Interface.
Det er behovene <em>andre</em> klasser har, som skal være styrende for utforming av konstruktører og metoder, ikke hva som er mest lettvint for klassen selv.
Hvis det f.eks. er nyttig for andre klasser å kunne justere et <code>Date</code>-objekt til å referere til <em>forrige</em> eller <em>neste</em> dag,
så kan en legge til metoder som <code>setToPreviousDay</code> og <code>setToNextDay</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void setToPreviousDay() {
   day = day - 1;
   if (day &lt; 1) { <b class="conum">(1)</b>
      month = month - 1;
      if (month &lt; 1) { <b class="conum">(2)</b>
         year = year - 1;
         month = 12;
      }
      day = daysInMonth(year, month);
   }
}

public void setToNextDay() {
   day = day + 1;
   if (day &gt; daysInMonth(year, month)) { <b class="conum">(1)</b>
      month = month + 1;
      if (month &gt; 12) { <b class="conum">(2)</b>
         year = year + 1;
         month = 1;
      }
      day = 1;
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Sjekker om en også må justere måneden.</p>
</li>
<li>
<p>Sjekker om en også må justere året.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Her er det også et poeng at det vil være vesentlig mer jobb å kode tilsvarende metodene utenfor <code>Date</code>-klassen (prøv!).
Da er det greit å gjøre andre klasser den tjenesten å inkludere dem i <code>Date</code> sitt API. Slike metoder, som ikke er nødvendige,
men gjør klassen enklere å bruke, kan gjerne kalles <em>bekvemmelighetsmetoder</em> (eng: convenience methods).</p>
</div>
<div class="paragraph">
<p>I motsetning til API-et, så utformes den interne tilstanden slik at klassen selv er lettvint å kode.
Det er greit, for den er jo likevel ikke synlig for andre klasser.
I en godt innkapslet klasse så står en friere til å velge intern representasjon og evt. endre den,
uten at koden i andre klasser blir påvirket.</p>
</div>
<div class="paragraph">
<p>Vi kunne f.eks valgt å representere måneden som et tall i verdiområdet 0-11, selv om lesemetoden for måneden returnerer et tall i området 1-12 og
endringsmetoden tilsvarende tar inn et tall i samme verdiområde. Det kunne vi gjort ved en enkel omkoding, uten å påvirke andre klasser.
Det er slett ikke uvanlig å ha get-metoder og variabler som hører sammen, men hvor verdien til variablen og returverdien til
get-metoden ikke er lik. Det vesentlige er at get- og set-metodene bruker samme logikk.</p>
</div>
<div class="paragraph">
<p>Det kan godt være større forskjell mellom metoder og intern representasjon enn som så.
En kan f.eks. ha en metode som heter <code>isLeapYearDay</code> som returnerer <code>true</code> kun dersom <code>Date</code>-objektet representerer 29. februar.
Da vil det ut fra navnet se ut som det finnes en <code>leapYearDat</code>-variabel av type <code>boolean</code>,
men det naturlige vil være å <em>beregne</em> verdien fra de tre virkelige variablene.</p>
</div>
<div class="paragraph">
<p>Generelt kan en lage getter/setter-par som gir inntrykk av at objektet har en tilsvarende variable,
uten at en slik nødvendigvis finnes. En slik "virtuell" variabel som leses/endres med getter/setter-metoder kalles ofte en "property",
uavhengig av om den er reell eller ikke. Dette er noe av styrken til innkapsling: API-et er "fasaden" til objektet,
som kan være nokså ulik innsiden.</p>
</div>
</div>
<div class="sect2">
<h3 id="_objektdiagram_og_klassediagram">Objektdiagram og klassediagram</h3>
<div class="paragraph">
<p><em>Objektdiagrammer</em> viser tilstanden til ett eller flere objekter (i en tenkt situasjon), under vises to <code>Date</code>-objekter:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-20703c86efdf73ee6635b5e25d5fb640.png" alt="diag 20703c86efdf73ee6635b5e25d5fb640" width="318" height="79">
</div>
</div>
<div class="paragraph">
<p>Slike diagrammer er nyttige for å forstå (detaljer ved) utførelsen av programmer,
men de sier lite om hvordan en <em>bruker</em> objekter av en gitt type, altså <em>programmerer</em> med dem. Til det er <em>klassediagrammer</em> bedre,
siden de gir en oversikt over deklarasjonene og indikerer hvilke variabler, konstruktører og metoder som er <code>private</code> og <code>public</code>.</p>
</div>
<div class="paragraph">
<p>Her er klassediagrammet for én av variantene over:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-dd81ff5080b6572f9528eeb820f034a0.png" alt="diag dd81ff5080b6572f9528eeb820f034a0" width="271" height="221">
</div>
</div>
<div class="paragraph">
<p>Synligheten er angitt med fargen på punktet, grønn angir <code>public</code> og rød angir <code>private</code>. Siden fokuset i slike diagrammer ofte er programmering på tvers av klasser,
så utelater en gjerne alt som er <code>private</code>, slik at det som er igjen er API-et til klassen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-85d7fca39f269f997f299e5a57b5f439.png" alt="diag 85d7fca39f269f997f299e5a57b5f439" width="256" height="169">
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-03-28 14:51:30 CET
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>